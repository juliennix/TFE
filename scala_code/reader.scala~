/////////////////////////////////////////////////////////////////
// Author : Nix Julien                                         //        
// For the University of LiÃ¨ge                                 //     
// Date : 06/02/2015                                           //
// File manager                                                //
///////////////////////////////////////////////////////////////// 

package reader

import scala.io.Source

object Reader 
{
    def FileReader(absPath:String, delimiter:String): List[List[String]] =
    {
        var MasterList = List(List(""))
        var F : scala.io.Source = null 
        
        try
        {
            println("Now reading... " + absPath)
            F = Source.fromFile(absPath)
            MasterList = F.getLines().toList map
            {
                // String#split() takes a regex, thus escaping.
                _.split("""\""" + delimiter).toList
            }

            return MasterList
        }   
        catch 
        {  
            case e: java.io.FileNotFoundException => 
            {
                println("The file does not exist!")
                return MasterList    
            }
            case e: java.io.IOException =>
            {
                println("Error reading the file!")
                F.close()
                return MasterList
            }
        } 
    }

    def intList(l : List[String]) = l.map(x=>Integer.parseInt(x))
}
